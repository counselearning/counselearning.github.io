<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <!-- SEO 基本標籤 -->
    <title>雲端心理測驗平台 | 免費線上心理評估工具</title>
    <meta name="description" content="提供專業的線上心理測驗，包含人際溝通量表、心情溫度計(BSRS-5)、壓力知覺量表(PSS)等多項免費評估工具。所有測驗均基於學術研究，協助您更了解自己的心理狀態。">
    <meta name="keywords" content="心理測驗,線上測驗,人際關係,壓力測試,心理健康,BSRS-5,PSS,免費測驗">
    
    <!-- Open Graph 標籤 -->
    <meta property="og:title" content="雲端心理測驗平台 | 免費線上心理評估工具">
    <meta property="og:description" content="提供專業的線上心理測驗，包含人際溝通量表、心情溫度計(BSRS-5)、壓力知覺量表(PSS)等多項免費評估工具。">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://counselearning.github.io/">
    <meta property="og:image" content="https://counselearning.github.io/favicon/og-image.png">
    <meta property="og:site_name" content="雲端心理測驗平台">
    
    <!-- Twitter Card 標籤 -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="雲端心理測驗平台 | 免費線上心理評估工具">
    <meta name="twitter:description" content="提供專業的線上心理測驗，包含人際溝通量表、心情溫度計(BSRS-5)、壓力知覺量表(PSS)等多項免費評估工具。">
    <meta name="twitter:image" content="https://counselearning.github.io/favicon/og-image.png">
    
    <!-- 其他重要 meta 標籤 -->
    <meta name="robots" content="index, follow">
    <meta name="author" content="雲端心理測驗平台">
    <meta name="language" content="zh-TW">
    
    <!-- 標準網址 -->
    <link rel="canonical" href="https://counselearning.github.io/">
    
    <!-- PWA 相關標籤 -->
    <meta name="theme-color" content="#FAF6F3">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="雲端心理測驗">
    
    <!-- 原有的資源引用 -->
    <link rel="icon" type="image/svg+xml" href="favicon/favicon.svg">
    <link rel="icon" type="image/png" href="favicon/favicon.png">
    <link rel="apple-touch-icon" href="favicon/apple-touch-icon.png">
    <link rel="manifest" href="favicon/site.webmanifest">
    <link rel="stylesheet" href="common.css">
    <link rel="stylesheet" href="index.css">
</head>
<body>
    <header class="site-header">
        <div class="header-container">
            <a href="/" class="site-logo">
                <svg class="logo-svg" width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <style>
                        .circle {
                            transform-origin: center;
                            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
                        }
                        .site-logo:hover .circle-1 {
                            transform: translate(-2px, -2px);
                        }
                        .site-logo:hover .circle-2 {
                            transform: translate(2px, -2px);
                        }
                        .site-logo:hover .circle-3 {
                            transform: translate(0, 2px);
                        }
                    </style>
                    <g id="logo">
                        <circle class="circle circle-1" cx="16" cy="16" r="12" fill="#A17A69" fill-opacity="0.9"/>
                        <circle class="circle circle-2" cx="24" cy="16" r="12" fill="#D4B2A7" fill-opacity="0.9"/>
                        <circle class="circle circle-3" cx="20" cy="22" r="12" fill="#8B6355" fill-opacity="0.9"/>
                    </g>
                </svg>
                <span class="logo-text">雲端心理測驗平台</span>
            </a>
             <!-- 新增漢堡選單按鈕 -->
            <button class="menu-toggle" aria-label="開啟選單">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path class="menu-icon" d="M3 12h18M3 6h18M3 18h18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
            </button>
            <nav class="site-nav">
                <a href="/" class="nav-link">首頁</a>
                <a href="/articles/" class="nav-link">文章</a>
            </nav>
        </div>
    </header>
    <div class="container">
        <div class="page-title">
            <svg class="page-title-logo" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                <style>
                    .circle {
                        transform-origin: center;
                        transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
                    }
                    .page-title:hover .circle-1 {
                        transform: translate(-2px, -2px);
                    }
                    .page-title:hover .circle-2 {
                        transform: translate(2px, -2px);
                    }
                    .page-title:hover .circle-3 {
                        transform: translate(0, 2px);
                    }
                </style>
                <g id="logo">
                    <circle class="circle circle-1" cx="16" cy="16" r="12" fill="#A17A69" fill-opacity="0.9"/>
                    <circle class="circle circle-2" cx="24" cy="16" r="12" fill="#D4B2A7" fill-opacity="0.9"/>
                    <circle class="circle circle-3" cx="20" cy="22" r="12" fill="#8B6355" fill-opacity="0.9"/>
                </g>
            </svg>
            <h1>雲端心理測驗平台</h1>
        </div>
        <p class="page-description">
            <strong>溫馨提醒：</strong>本網站之測驗僅供自我學習或休閒用途，不能代表任何臨床診斷，若您有較嚴重的困擾，請務必尋求專業協助！
        </p>
        <div class="search-container">
            <div class="search-box">
                <input type="text" class="search-input" placeholder="搜尋測驗..." id="searchTests">
                <div class="search-icon"></div>
                <button class="search-button" id="searchButton">搜尋</button>
            </div>
        </div>
        <div class="search-results-info" id="searchInfo"></div>
        <div class="search-results-divider" id="searchDivider"></div>
        <div class="tests-grid">
            <a href="./interpersonal-test/index.html" class="test-card">
                <div class="test-content">
                    <h2>台灣人人際溝通量表</h2>
                    <p>透過37個問題了解你在人際互動中的溝通模式</p>
                    <div class="test-info">
                        <span class="duration">約需時間：5分鐘</span>
                        <span class="questions">題數：37題</span>
                    </div>
                </div>
            </a>
            <a href="./BSRS-5/index.html" class="test-card">
                <div class="test-content">
                    <h2>心情溫度計（BSRS-5）</h2>
                    <p>透過6個問題了解你最近一週的心理狀態</p>
                    <div class="test-info">
                        <span class="duration">約需時間：1分鐘</span>
                        <span class="questions">題數：6題</span>
                    </div>
                </div>
            </a>
            <a href="./stress-perception-scale/index.html" class="test-card">
                <div class="test-content">
                    <h2>壓力知覺量表(PSS)</h2>
                    <p>透過14個問題了解你最近一個月的心理狀態</p>
                    <div class="test-info">
                        <span class="duration">約需時間：3-5分鐘</span>
                        <span class="questions">題數：14題</span>
                    </div>
                </div>
            </a>
            <a href="./BASIC-PH/index.html" class="test-card">
                <div class="test-content">
                    <h2>【冒險者】內在復原力測驗</h2>
                    <p>透過5個問題了解你面對挑戰與壓力時常用的應對風格</p>
                    <div class="test-info">
                        <span class="duration">約需時間：3分鐘</span>
                        <span class="questions">題數：5題</span>
                    </div>
                </div>
            </a>
            <!-- 未來可以在這裡添加更多測驗卡片 -->
        </div>
    </div>
    <script>
    function normalizeChineseText(text) {
        // 建立異體字對照表
        const variants = {
            // 繁簡體對照
            '臺': '台',
            '裡': '里',
            '佇': '住',
            '瞭': '了',
            '曆': '歷',
            '檯': '台',
            '瑯': '琅',
            '甯': '寧',
            '佔': '占',
            '纔': '才',
            '衆': '眾',
            '峯': '峰',
            '棱': '稜',
            '污': '汙',
            
            // 常見異體字
            '淨': '凈',
            '裏': '裡',
            '姊': '姐',
            '啟': '啓',
            '囉': '羅',
            '檢': '検',
            '查': '査',
            '閒': '閑',
            '綫': '線',
            '峽': '峡',
            
            // 量詞異體
            '個': '个',
            '隻': '只',
            '裡': '裏',
            
            // 常用詞異體
            '群眾': '群衆',
            '讚': '贊',
            '歲': '嵗',
            '溫': '温',
            '賬': '帳',
            '徵': '征',
            
            // 地名常見異體
            '臺灣': '台灣',
            '臺北': '台北',
            '臺中': '台中',
            '臺南': '台南',
            '臺東': '台東',
            
            // 數字異體
            '壹': '一',
            '貳': '二',
            '參': '三',
            '肆': '四',
            '伍': '五',
            '陸': '六',
            '柒': '七',
            '捌': '八',
            '玖': '九',
            '拾': '十',
            
            // 常見錯別字對照
            '准': '準',
            '余': '餘',
            '后': '後',
            '麵': '面',
            '復': '複',
        };
        
        // 先處理較長的詞組
        const phrases = ['臺灣', '臺北', '臺中', '臺南', '臺東', '群眾'];
        phrases.forEach(phrase => {
            if (variants[phrase]) {
                text = text.replace(new RegExp(phrase, 'g'), variants[phrase]);
            }
        });
        
        // 再處單字
        return text.split('').map(char => variants[char] || char).join('');
    }

    function calculateSimilarity(str1, str2) {
        // 將字串轉換為小寫並移除空格，同時處理異體字
        str1 = normalizeChineseText(str1.toLowerCase().replace(/\s+/g, ''));
        str2 = normalizeChineseText(str2.toLowerCase().replace(/\s+/g, ''));
        
        // 計算最長公共子序列(LCS)長度
        const m = str1.length;
        const n = str2.length;
        const dp = Array(m + 1).fill().map(() => Array(n + 1).fill(0));
        
        for (let i = 1; i <= m; i++) {
            for (let j = 1; j <= n; j++) {
                if (str1[i - 1] === str2[j - 1]) {
                    dp[i][j] = dp[i - 1][j - 1] + 1;
                } else {
                    dp[i][j] = Math.max(dp[i - 1][j], dp[i][j - 1]);
                }
            }
        }
        
        return dp[m][n] / Math.max(m, n);
    }

    function performSearch() {
        const searchTerm = normalizeChineseText(document.getElementById('searchTests').value.toLowerCase());
        const testCards = document.querySelectorAll('.test-card');
        const searchInfo = document.getElementById('searchInfo');
        const searchDivider = document.getElementById('searchDivider');
        
        if (!searchTerm.trim()) {
            testCards.forEach(card => card.style.display = '');
            searchInfo.style.display = 'none';
            searchDivider.style.display = 'none';
            return;
        }

        let exactMatches = 0;
        let fuzzyMatches = [];

        testCards.forEach(card => {
            const title = normalizeChineseText(card.querySelector('h2').textContent);
            const description = normalizeChineseText(card.querySelector('p').textContent);
            const titleLower = title.toLowerCase();
            const descriptionLower = description.toLowerCase();

            // 檢查精確匹配
            if (titleLower.includes(searchTerm) || descriptionLower.includes(searchTerm)) {
                card.style.display = '';
                exactMatches++;
            } else {
                // 檢查模糊匹配
                const titleSimilarity = calculateSimilarity(searchTerm, titleLower);
                const descSimilarity = calculateSimilarity(searchTerm, descriptionLower);
                const similarity = Math.max(titleSimilarity, descSimilarity);

                if (similarity > 0.3) {
                    fuzzyMatches.push({
                        card: card,
                        similarity: similarity
                    });
                    card.style.display = 'none';
                } else {
                    card.style.display = 'none';
                }
            }
        });

        // 更新搜尋結果信息
        if (exactMatches === 0 && fuzzyMatches.length === 0) {
            searchInfo.innerHTML = `<strong>找不到符合 "${searchTerm}" 的測驗</strong><br>請嘗試其他關鍵字`;
            searchInfo.style.display = 'block';
            searchDivider.style.display = 'none';
        } else {
            let infoText = '';
            if (exactMatches > 0) {
                infoText = `<strong>找到 ${exactMatches} 個符合的測驗</strong>`;
            }
            if (fuzzyMatches.length > 0) {
                fuzzyMatches.sort((a, b) => b.similarity - a.similarity);
                
                if (exactMatches > 0) {
                    searchDivider.style.display = 'block';
                    infoText += '<br><br>您可能也對以下測驗感興趣：';
                } else {
                    infoText = '<strong>找不到完全符合的測驗</strong><br>以下是相關推薦：';
                }

                fuzzyMatches.forEach(match => {
                    match.card.style.display = '';
                });
            }
            searchInfo.innerHTML = infoText;
            searchInfo.style.display = 'block';
        }
    }

    // 點擊搜尋按鈕時執行搜尋
    document.getElementById('searchButton').addEventListener('click', performSearch);

    // 按下 Enter 鍵時執行搜尋
    document.getElementById('searchTests').addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
            e.preventDefault();
            performSearch();
        }
    });
    </script>
    <script src="common.js"></script>
</body>
</html> 
